<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/assy.css">
    <script src="/js/jquery-3.6.0.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <div class="title_sect">
            <span class="title">Ov1k CUSH Process</span>
            <span class="clock"></span>
            <div class="logo"></div>
        </div>

        <div class="content_sect">
            <div class="lh_frame">
                <span class="frame_title">PRODUCT IMAGE LH</span>

                <img src="/img/assy1_lh.png" id = "img_lh">

                <div class="data_area">
                    <div class="part">  
                        <span class="frame_title">CONCLUSION</span>
                        <div class="conclusion">
                            <span id="conclusion_lh"></span>
                        </div>
                    </div>

                    <div class="point">
                        <div class="row">
                            <div class="label">
                                <span>T/Q</span>
                            </div>

                            <div class="value">
                                <span></span>
                            </div>
                        </div>

                        <div class="row">
                            <div class="label">
                                <span>SPEC</span>
                            </div>

                            <div class="value">
                                <span>8.8 - 10.8 Nm</span>
                            </div>
                        </div>

                        <div class="row">
                            <div class="label">
                                <span>부쉬</span>
                            </div>

                            <div class="value">
                                <span id="data1_lh"></span>
                            </div>
                        </div>

                        <div class="row">
                            <div class="label">
                                <span>스펀지</span>
                            </div>

                            <div class="value">
                                <span id="data2_lh"></span>
                            </div>
                        </div>

                        <div class="row">
                            <div class="label">
                                <span>스프링</span>
                            </div>

                            <div class="value">
                                <span id="data3_lh"></span>
                            </div>
                        </div>

                        <div class="row">
                            <div class="label">
                                <span>조립 완료</span>
                            </div>

                            <div class="value">
                                <span id="data4_lh"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="rh_frame">
                <span class="frame_title">PRODUCT IMAGE RH</span>

                <img src="/img/assy1_rh.png" id = "img_rh">

                <div class="data_area">
                    <div class="part">
                        <span class="frame_title">CONCLUSION</span>
                        <div class="conclusion">
                            <span id="conclusion_rh"></span>
                        </div>
                    </div>

                    <div class="point">
                        <div class="row">
                            <div class="label">
                                <span>T/Q</span>
                            </div>

                            <div class="value">
                                <span></span>
                            </div>
                        </div>

                        <div class="row">
                            <div class="label">
                                <span>SPEC</span>
                            </div>

                            <div class="value">
                                <span>8.8 - 10.8 Nm</span>
                            </div>
                        </div>

                        <div class="row">
                            <div class="label">
                                <span>부쉬</span>
                            </div>

                            <div class="value">
                                <span id="data1_rh"></span>
                            </div>
                        </div>

                        <div class="row">
                            <div class="label">
                                <span>스펀지</span>
                            </div>

                            <div class="value">
                                <span id="data2_rh"></span>
                            </div>
                        </div>

                        <div class="row">
                            <div class="label">
                                <span>스프링</span>
                            </div>

                            <div class="value">
                                <span id="data3_rh"></span>
                            </div>
                        </div>

                        <div class="row">
                            <div class="label">
                                <span>조립 완료</span>
                            </div>

                            <div class="value">
                                <span id="data4_rh"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="cnt_frame">
                <span class="frame_title">COUNT</span>

                <div class="table_header">
                    <div class="idx">
                        <span>Idx</span>
                    </div>

                    <div class="dir">
                        <span>Dir</span>
                    </div>

                    <div class="part_no">
                        <span>Part No.</span>
                    </div>

                    <div class="count">
                        <span>Count</span>
                    </div>
                </div>

                <div class="table_bg">
                    <table class="cnt_table">
                    </table>
                </div>

                <button class="reset">COUNT RESET</button>
                <button class="auto">AUTO MODE</button>
            </div>
        </div>

        <div class="control_sect">
            <div class="plc_lh">
                <div class="plc_label_area">
                    <div class="plc_label"><span>D6000</span></div>
                    <div class="plc_label"><span>D6005</span></div>
                    <div class="plc_label"><span>D6010</span></div>
                    <div class="plc_label"><span>D6015</span></div>
                </div>
                <div class="plc_value_area">
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                </div>

                <div class="plc_label_area">
                    <div class="plc_label"><span>D6001</span></div>
                    <div class="plc_label"><span>D6006</span></div>
                    <div class="plc_label"><span>D6011</span></div>
                    <div class="plc_label"><span>D6016</span></div>
                </div>
                <div class="plc_value_area">
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                </div>

                <div class="plc_label_area">
                    <div class="plc_label"><span>D6002</span></div>
                    <div class="plc_label"><span>D6007</span></div>
                    <div class="plc_label"><span>D6012</span></div>
                    <div class="plc_label"><span>D6017</span></div>
                </div>
                <div class="plc_value_area">
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                </div>

                <div class="plc_label_area">
                    <div class="plc_label"><span>D6003</span></div>
                    <div class="plc_label"><span>D6008</span></div>
                    <div class="plc_label"><span>D6013</span></div>
                    <div class="plc_label"><span>D6018</span></div>
                </div>
                <div class="plc_value_area">
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                </div>

                <div class="plc_label_area">
                    <div class="plc_label"><span>D6004</span></div>
                    <div class="plc_label"><span>D6009</span></div>
                    <div class="plc_label"><span>D6014</span></div>
                    <div class="plc_label"><span>D6019</span></div>
                </div>
                <div class="plc_value_area">
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                </div>
            </div>

            <div class="plc_rh">
                <div class="plc_label_area">
                    <div class="plc_label"><span>D6000</span></div>
                    <div class="plc_label"><span>D6005</span></div>
                    <div class="plc_label"><span>D6010</span></div>
                    <div class="plc_label"><span>D6015</span></div>
                </div>
                <div class="plc_value_area">
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                </div>

                <div class="plc_label_area">
                    <div class="plc_label"><span>D6001</span></div>
                    <div class="plc_label"><span>D6006</span></div>
                    <div class="plc_label"><span>D6011</span></div>
                    <div class="plc_label"><span>D6016</span></div>
                </div>
                <div class="plc_value_area">
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                </div>

                <div class="plc_label_area">
                    <div class="plc_label"><span>D6002</span></div>
                    <div class="plc_label"><span>D6007</span></div>
                    <div class="plc_label"><span>D6012</span></div>
                    <div class="plc_label"><span>D6017</span></div>
                </div>
                <div class="plc_value_area">
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                </div>

                <div class="plc_label_area">
                    <div class="plc_label"><span>D6003</span></div>
                    <div class="plc_label"><span>D6008</span></div>
                    <div class="plc_label"><span>D6013</span></div>
                    <div class="plc_label"><span>D6018</span></div>
                </div>
                <div class="plc_value_area">
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                </div>

                <div class="plc_label_area">
                    <div class="plc_label"><span>D6004</span></div>
                    <div class="plc_label"><span>D6009</span></div>
                    <div class="plc_label"><span>D6014</span></div>
                    <div class="plc_label"><span>D6019</span></div>
                </div>
                <div class="plc_value_area">
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                    <div class="plc_value"><span></span></div>
                </div>
            </div>

            <div class="ctrl_pad">
                <button id="barcode_button">Barcode<br>Setting</button>
                <button><img src="/img/search.svg" /></button>
                <button><img src="/img/port.svg" /></button>
                <button><img src="/img/keyboard.svg" /></button>
                <button id="part_button"><img src="/img/setting.svg" /></button>
                <button onClick = "window.close()"><img src="/img/power.svg" /></button>
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            updateClock();
            updateData();
        });

        function updateClock() {
            const now = new Date();
            const formats = { year: "numeric", month: "2-digit", day: "2-digit", hour: "2-digit", minute: "2-digit", second: "2-digit", hour12: false };
            const datetime = now.toLocaleString("ko-KR", formats);

            $(".clock").text(datetime);
        }

        function updateData() {
            $.ajax({
                url: "/api/get_data.php",
                type: "POST",
                success: function (result) {
                    var data = JSON.parse(result);

                    var dir = data[0];

                    if(dir == 1){
                        for(i = 1; i < data.length - 1; i++){
                            let idLH = "data" + i + "_lh";
                            let idRH = "data" + i + "_rh";

                            if(data[i] == 1){
                                $("#" + idLH).text("OK");
                                $("#" + idLH).parent().css("background-color", "green");
                            }else if(data[i] == 2){
                                $("#" + idLH).text("NG");
                                $("#" + idLH).parent().css("background-color", "red");
                            }else{
                                $("#" + idLH).text("");
                                $("#" + idLH).parent().css("background-color", "white");
                            }

                            $("#" + idRH).text("");
                            $("#" + idRH).parent().css("background-color", "white");
                        }

                        var conclusion = data[data.length - 1];
                        if(conclusion == 1){
                            $("#conclusion_lh").text("OK");
                            $("#conclusion_lh").parent().css("background-color", "green");
                        }else if(conclusion == 2){
                            $("#conclusion_lh").text("NG");
                            $("#conclusion_lh").parent().css("background-color", "red");
                        }else{
                            $("#conclusion_lh").text("");
                            $("#conclusion_lh").parent().css("background-color", "white");
                        }

                        $("#conclusion_rh").text("");
                        $("#conclusion_rh").parent().css("background-color", "white");
                    }else if(dir == 2){
                        for(i = 1; i < data.length - 1; i++){
                            let idLH = "data" + i + "_lh";
                            let idRH = "data" + i + "_rh";

                            if(data[i] == 1){
                                $("#" + idRH).text("OK");
                                $("#" + idRH).parent().css("background-color", "green");
                            }else if(data[i] == 2){
                                $("#" + idRH).text("NG");
                                $("#" + idRH).parent().css("background-color", "red");
                            }else{
                                $("#" + idRH).text("");
                                $("#" + idRH).parent().css("background-color", "white");
                            }

                            $("#" + idLH).text("");
                            $("#" + idLH).parent().css("background-color", "white");
                        }

                        var conclusion = data[data.length - 1];
                        if(conclusion == 1){
                            $("#conclusion_rh").text("OK");
                            $("#conclusion_rh").parent().css("background-color", "green");
                        }else if(conclusion == 2){
                            $("#conclusion_rh").text("NG");
                            $("#conclusion_rh").parent().css("background-color", "red");
                        }else{
                            $("#conclusion_rh").text("");
                            $("#conclusion_rh").parent().css("background-color", "white");
                        }

                        $("#conclusion_lh").text("")
                        $("#conclusion_lh").parent().css("background-color", "white");
                    }
                }
            });
        }

        setInterval(updateClock, 1000);
        setInterval(updateData, 1000);
    </script>
</body>

</html>