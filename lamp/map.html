<!DOCTYPE html>
<html lang = "ko">
    <head>
        <meta charset = "UTF-8">
        <meta name = "viewport" content = "width=device-width, initial-scale=1.0">
        <link rel = "stylesheet" href = "/css/map.css">
        <script src = "/js/jquery-3.6.0.min.js"></script>
    </head>

    <body>
        <div class = "wrapper">
            <div class = "title">
                <div class = "logo">
                    <img src = "/icon/siren.svg" width = "30" height = "30">
                </div>

                <div class = "text">
                    <span>부스 호출 알림</span>
                </div>
            </div>

            <div class = "map">
                <div class = "map_bg">
                    <img src = "/img/layout.jpg">
                    
                    <!-- SP2 MECH SUB 1 -->
                    <!-- 1번 - 5번 부스 -->
                    <div class = "sector on" id = "sector_1" onclick = "enterSector(this.id)">
                        <span>1</span>
                    </div>

                    <!-- SP2 MECH SUB 2 -->
                    <!-- 6번 - 8번 부스 -->
                    <div class = "sector on" id = "sector_2" onclick = "enterSector(this.id)">
                        <span>2</span>
                    </div>
                </div>
            </div>
        </div>

        <script>
            var previousUrl = parent.previousUrl;

            $(document).ready(function(){
                setLocation();
            });

            function setLocation(){
                const imgWidth = $(".map_bg img").width();
                const imgHeight = $(".map_bg img").height();

                const sector = Array();

                const location = {};
                const scale = {};

                sector[0] = $("#sector_1");
                sector[1] = $("#sector_2");

                location[0] = {};
                location[0]["top"] = 0.448;
                location[0]["left"] = 0.226;

                scale[0] = {};
                scale[0]["width"] = 0.25;
                scale[0]["height"] = 0.19;

                location[1] = {};
                location[1]["top"] = 0.48;
                location[1]["left"] = 0.72;

                scale[1] = {};
                scale[1]["width"] = 0.096;
                scale[1]["height"] = 0.161;

                for(let i = 0; i < sector.length; i++){
                    sector[i].css("top", imgHeight * location[i]["top"]);
                    sector[i].css("left", imgWidth * location[i]["left"]);

                    sector[i].width(imgWidth * scale[i]["width"]);
                    sector[i].height(imgHeight * scale[i]["height"]);
                }
            }

            function enterSector(id){
                if(id.includes("1")){
                    previousUrl.push(parent.$("#page").attr("src"));

                    window.location.href = "/sector.html?sector=1";
                }else if(id.includes("2")){
                    previousUrl.push(parent.$("#page").attr("src"));

                    window.location.href = "/sector.html?sector=2";
                }
            }
        </script>
    </body>
</html>